/*!
 * Copyright (C) 2016-present, Yuansuan.cn
 */

import { observable, runInAction } from 'mobx'

import { Http } from '@/utils'
import App from './App'

interface IAppList {
  list: App[]
  appMap: any[]
}

export default class StandardAppList implements IAppList {
  @observable list:App[] = []
  @observable appMap = []

  fetch = async () => {
    const res = await Http.get('/standardapp/list')
    runInAction(() => {
      this.list = res.data.apps.map(item => {
          const app = new App(item)
          this.appMap.push({ id: item.id, app: app })
          return app
        })
      })
    return res
  }
}

export const appList = new StandardAppList()

export const defaultAppIcon = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjMzcHgiIGhlaWdodD0iMTA4cHgiIHZpZXdCb3g9IjAgMCAyMzMgMTA4IiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA1Mi4yICg2NzE0NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+57yW57uEIDQ8L3RpdGxlPgogICAgPGRlc2M+Q3JlYXRlZCB3aXRoIFNrZXRjaC48L2Rlc2M+CiAgICA8ZGVmcz4KICAgICAgICA8ZmlsdGVyIHg9Ii04LjYlIiB5PSItNzAuNiUiIHdpZHRoPSIxMTcuMSUiIGhlaWdodD0iMjQxLjIlIiBmaWx0ZXJVbml0cz0ib2JqZWN0Qm91bmRpbmdCb3giIGlkPSJmaWx0ZXItMSI+CiAgICAgICAgICAgIDxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjQiIGluPSJTb3VyY2VHcmFwaGljIj48L2ZlR2F1c3NpYW5CbHVyPgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IumhtemdoiIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+CiAgICAgICAgPGcgaWQ9IjEu6YCJ5oup6K6h566X6LWE5rqQIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNzU5LjAwMDAwMCwgLTIwNC4wMDAwMDApIj4KICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC03IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjMuMDAwMDAwLCAxOTAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iQUJBUVVT5aSN5Yi2LTIiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYxOC42NjY2NjcsIDAuMDAwMDAwKSI+CiAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Ium7mOiupCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTcuMDAwMDAwLCAxNC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPGcgaWQ9Iue8lue7hC00Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGwtcnVsZT0ibm9uemVybyIgeD0iMC42NjY2NjY2NjciIHk9IjAiIHdpZHRoPSIyMzIiIGhlaWdodD0iMTA4Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dGV4dCBpZD0iTE9HTyIgZm9udC1mYW1pbHk9IkhlbHZldGljYU5ldWUtQm9sZCwgSGVsdmV0aWNhIE5ldWUiIGZvbnQtc2l6ZT0iNDAiIGZvbnQtd2VpZ2h0PSJib2xkIiBmaWxsPSIjQ0NENkU1Ij4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8dHNwYW4geD0iNDIiIHk9IjczIj5MT0dPPC90c3Bhbj4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdGV4dD4KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxyZWN0IGlkPSLnn6nlvaIiIGZpbGw9IiNDQ0Q2RTUiIHg9IjE2NSIgeT0iNDQiIHdpZHRoPSIyNCIgaGVpZ2h0PSI1Ij48L3JlY3Q+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cmVjdCBpZD0i55+p5b2i5aSN5Yi2IiBmaWxsPSIjQ0NENkU1IiB4PSIxNjUiIHk9IjU2IiB3aWR0aD0iMjQiIGhlaWdodD0iNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHJlY3QgaWQ9IuefqeW9ouWkjeWIti0yIiBmaWxsPSIjQ0NENkU1IiB4PSIxNjUiIHk9IjY4IiB3aWR0aD0iMjQiIGhlaWdodD0iNSI+PC9yZWN0PgogICAgICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExNi41NzQwNzQsOTcuMiBDMTU1LjIzNDAwNyw5Ny4yIDE4NS44MzMzMzMsOTUuMjE3OTc4NCAxODUuODMzMzMzLDg4LjcgQzE4NS44MzMzMzMsODIuMTgyMDIxNiAxNTQuNDkzMjY2LDgwLjIgMTE1LjgzMzMzMyw4MC4yIEM3Ny4xNzM0MDA4LDgwLjIgNDUuODMzMzMzMyw4MS41ODAzMzA3IDQ1LjgzMzMzMzMsODguNyBDNDUuODMzMzMzMyw5NS44MTk2NjkzIDc3LjkxNDE0MTYsOTcuMiAxMTYuNTc0MDc0LDk3LjIgWiIgaWQ9IuakreWchuW9oiIgZmlsbC1vcGFjaXR5PSIwLjYiIGZpbGw9IiNDQ0Q2RTUiIGZpbGwtcnVsZT0ibm9uemVybyIgb3BhY2l0eT0iMC40OTUxODY5NDIiIGZpbHRlcj0idXJsKCNmaWx0ZXItMSkiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICAgICAgPC9nPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+'
